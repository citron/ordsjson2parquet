# README: Oracle JSON to Parquet Converter

## Introduction

This script converts JSON files exported from Oracle Database using sqlcl into Parquet files. It's designed to work seamlessly with JSON exports generated by Oracle's SQLcl tool when using the `SET SQLFORMAT json` command.

## Features

- Converts Oracle JSON exports to efficient Parquet format
- Handles multiple JSON files in a single command
- Automatically installs required Python dependencies
- Preserves data structure and types during conversion

## Usage

### Prerequisites
- Python 3.x
- bash shell

### Installation

1. Download the script:
```bash
wget https://raw.githubusercontent.com/citron/ordsjson2parquet/main/ordsjson2parquet.sh
```

2. Make it executable:
```bash
chmod +x ordsjson2parquet.sh
```

### Generating JSON from Oracle Database

Use the following SQLcl commands to generate properly formatted JSON exports:

```sql
SET SQLFORMAT json
SET FEEDBACK OFF
SET TERMOUT OFF
SPOOL foo.json
ALTER SESSION SET TIME_ZONE = 'UTC'
ALTER SESSION SET NLS_DATE_FORMAT = 'YYYY-MM-DD"T"hh24:MI:SS"UTC"'
ALTER SESSION SET NLS_TIMESTAMP_FORMAT = 'YYYY-MM-DD"T"hh24:MI:SS"UTC"'
SET ENCODING UTF8
SELECT * FROM FOO
/
SPOOL OFF
EXIT
```

### Converting JSON to Parquet

Run the script with one or more JSON files as arguments:

```bash
./ordsjson2parquet.sh file1.json file2.json
```

This will create corresponding Parquet files with the same base names as the input JSON files.

## Technical Details

The script:
1. Checks for required dependencies
2. Validates input files
3. Uses pandas and pyarrow for efficient data conversion
4. Maintains the structure of the original JSON data
5. Generates Parquet files with optimal compression and encoding

## License

This project is licensed under the MIT License - see the LICENSE file for details.

## Disclaimer

This script is provided "as is" without warranty of any kind. Use at your own risk. The author is not responsible for any damages or data loss.

## Contact

For questions or feedback, contact the author at ordsjson2parquet@amilto.com or visit the GitHub repository at https://github.com/citron/ordsjson2parquet

## Author

William Gacquer

## Acknowledgments

This script leverages the powerful data processing capabilities of the Python pandas and pyarrow libraries. Special thanks to the maintainers of these projects for their excellent work.
